/users/{id}:
    get:
      summary: Récupère un utilisateur par ID
      parameters:
        - $ref: '#/components/parameters/Id'
      responses:
        '200':
          description: Utilisateur trouvé
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
              example:
                identifier: user_123
                personalInfo:
                  first_name: Jean
                  last_name: Dupont
                  birthdate: 1990-05-15
                  email: jean.dupont@example.com
                address:
                  address_street: 123 Rue Principale
                  address_city: Antananarivo
                  address_country: Madagascar
                  address_postal_code: 101
                preferences:
                  needs_newsletter: true
                  language: fr
        '404':
          description: Utilisateur non trouvé
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: User not found

  /users:
    post:
      summary: Crée une liste d'utilisateurs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/CreateUserProfile'
            example:
              - personalInfo:
                  first_name: Jean
                  last_name: Dupont
                  birthdate: 1990-05-15
                  email: jean.dupont@example.com
                address:
                  address_street: 123 Rue Principale
                  address_city: Antananarivo
                  address_country: Madagascar
                  address_postal_code: 101
                preferences:
                  needs_newsletter: true
                  language: fr
      responses:
        '201':
          description: Utilisateurs créés
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserProfile'
              example:
                - identifier: user_123
                  personalInfo:
                    first_name: Jean
                    last_name: Dupont
                    birthdate: 1990-05-15
                    email: jean.dupont@example.com
                  address:
                    address_street: 123 Rue Principale
                    address_city: Antananarivo
                    address_country: Madagascar
                    address_postal_code: 101
                  preferences:
                    needs_newsletter: true
                    language: fr

  /users/{id}/personalInfo:
    put:
      summary: Met à jour les informations personnelles
      parameters:
        - $ref: '#/components/parameters/Id'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PersonalInfo'
            example:
              first_name: Jean
              last_name: Dupont
              birthdate: 1990-05-15
              email: jean.dupont@example.com
      responses:
        '200':
          description: Informations personnelles mises à jour
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonalInfo'
              example:
                first_name: Jean
                last_name: Dupont
                birthdate: 1990-05-15
                email: jean.dupont@example.com
        '404':
          description: Utilisateur non trouvé
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: User not found

  /users/{id}/address:
    put:
      summary: Met à jour l'adresse
      parameters:
        - $ref: '#/components/parameters/Id'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
            example:
              address_street: 123 Rue Principale
              address_city: Antananarivo
              address_country: Madagascar
              address_postal_code: 101
      responses:
        '200':
          description: Adresse mise à jour
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
              example:
                address_street: 123 Rue Principale
                address_city: Antananarivo
                address_country: Madagascar
                address_postal_code: 101
        '404':
          description: Utilisateur non trouvé
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: User not found

  /users/{id}/preferences:
    put:
      summary: Met à jour les préférences
      parameters:
        - $ref: '#/components/parameters/Id'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Preferences'
            example:
              needs_newsletter: true
              language: fr
      responses:
        '200':
          description: Préférences mises à jour
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Preferences'
              example:
                needs_newsletter: true
                language: fr
        '404':
          description: Utilisateur non trouvé
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: User not found